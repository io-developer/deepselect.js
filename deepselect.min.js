/**
 * repo: https://github.com/io-developer/deepselect.js
 */
var deepselect=function(c){return deepselect.create(c)};deepselect.events={select:"deepselectSelect",selectStart:"deepselectStart",selectComplete:"deepselectSelectComplete"};deepselect.cssClasses={main:"deepselect",node:"deepselect-node",nodeContainer:"deepselect-node-container"};
deepselect.create=function(c){var h=c.dataProvider||new deepselect.DataProvider(c.data),a=document.createElement("div");a.className=deepselect.cssClasses.main;c=new deepselect.Renderer(a,c.enableLabels,c.defaultLabel);var b=new deepselect.Controller(h,a,c);a.isCompleted=b.isCompleted;a.currentIndexes=b.currentIndexes;a.currentValues=b.currentValues;a.controller=function(){return b};a.onSelect=function(b){a.addEventListener(deepselect.events.select,b.bind(a))};a.onSelectStart=function(b){a.addEventListener(deepselect.events.selectStart,
b.bind(a))};a.onSelectComplete=function(b){a.addEventListener(deepselect.events.selectComplete,b.bind(a))};return a};
deepselect.Controller=function(c,h,a){function b(){q=[];p=[];for(var a=-1,b=k.length;++a<b;){var e=c.getItemAt(k.slice(0,a+1));q.push(e);p.push(e.value)}}function f(b){var e=c.getItemAt(b);(e=a.addNode(e))&&g(e,b);return e}function g(b,e){var c=a.isEnableLabels()?1:0;b.addEventListener("change",function(a){d.handleSelectAt(e.concat(b.selectedIndex-c))})}function e(b){var a;l?(a=document.createEvent("Event"),a.initEvent(b,!0,!1)):a=new Event(b);a.selectedIndexes=k.concat();a.selectedItems=q.concat();
a.selectedValues=p.concat();h.dispatchEvent(a)}var d=this,l=-1<window.navigator.userAgent.indexOf("MSIE "),m=!1,n=!1,k=[],q=[],p=[],r=0;d.isCompleted=function(){return m};d.getRenderer=function(){return a};d.getDataProvider=function(){return c};d.currentIndexes=function(a){a&&d.selectByIndexes(a);b();return k.concat()};d.currentValues=function(a){a&&d.selectByValues(a);b();return p.concat()};d.selectByIndexes=function(b){d.handleSelectAt(b.slice(0,b.length-1));d.handleSelectAt(b.slice(0,b.length));
a.setSelectedIndexes(b)};d.selectByValues=function(a){d.selectByIndexes(c.getIndexesByVals(a))};d.handleSelectAt=function(d){d=d||[];if(c.getItemsAt(d)){for(var l=-1,h=Math.min(d.length,k.length);++l<h&&d[l]==k[l];);for(var g=--l,h=k.length;++g<h;)k.pop(),a.popNode();g=null;for(h=d.length;++l<h;)k.push(d[l]),g=f(k.concat());0==h&&(k=[],a.popNode(),g=f(k.concat()));++r;a.isEnableLabels()||arguments.callee(d.concat(0));--r;0==r&&(m=!g,b(),e(deepselect.events.select),n&&(n=!0,e(deepselect.events.selectStart)),
m&&(n=!1,b(),e(deepselect.events.selectComplete)))}};d.handleSelectAt()};
deepselect.Renderer=function(c,h,a){var b=this,f=[],g=[];a=a||"Choose...";b.isEnableLabels=function(){return h};b.getDefaultLabel=function(){return a};b.setSelectedIndexes=function(a){for(var b=h?1:0,c=-1,g=Math.min(a.length,f.length);++c<g;)f[c].selectedIndex=a[c]+b};b.popNode=function(){0<g.length&&(f.pop(),(child=g.pop())&&c.removeChild(child))};b.addNode=function(e){var d=null,l=(e?e.items:null)||[],m=l.length;if(0<m){d=document.createElement("select");d.className=deepselect.cssClasses.node;h&&
d.appendChild(b.renderNodeItem({name:e.label||a,disabled:1,selected:1}));for(e=-1;++e<m;)d.appendChild(b.renderNodeItem(l[e]));var n=b.renderNodeContainer(d);c.appendChild(n)}f.push(d);g.push(n);return d};b.renderNodeContainer=function(a){el=document.createElement("div");el.className=deepselect.cssClasses.nodeContainer;el.appendChild(a);return el};b.renderNodeItem=function(a){var b=document.createTextNode(a.name),c=document.createElement("option");c.appendChild(b);c.setAttribute("value",a.value||
"");a.disabled&&c.setAttribute("disabled","disabled");a.selected&&c.setAttribute("selected","selected");return c}};
deepselect.DataProvider=function(c){function h(a){for(var b=c,f=b.items,g=-1,e=a.length;++g<e;)if(b=a[g],0<=b&&b<f.length)b=f[b],f=b.items||[];else{f=b=null;break}return{item:b,items:f}}this.getItemAt=function(a){return h(a).item};this.getItemsAt=function(a){return h(a).items};this.getIndexesByVals=function(a){a=a.concat();for(var b=[],f=c.items;a.length;){for(var g=a.shift(),e=f.length;0<e--&&f[e].value!=g;);b.push(e);if(-1<e&&(f=f[e].items))continue;break}return b}};