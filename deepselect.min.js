/**
 * repo: https://github.com/io-developer/deepselect.js
 */
var deepselect=function(e){return deepselect.create(e)};deepselect.events={select:"deepselectSelect",selectStart:"deepselectStart",selectComplete:"deepselectSelectComplete"};deepselect.cssClasses={main:"deepselect",node:"deepselect-node",nodeContainer:"deepselect-node-container",nodeOption:"deepselect-node-option"};
deepselect.create=function(e){var k=e.dataProvider||new deepselect.DataProvider(e.data),a=[],f=e.cssClasses||[],g;for(g in deepselect.cssClasses)a[g]=f[g]||deepselect.cssClasses[g];var b=document.createElement("div");b.className=a.main;e=new deepselect.Renderer(b,a,e.enableLabels,e.label,e.labelSelectable,e.labelValue);var c=new deepselect.Controller(k,b,e);b.isCompleted=c.isCompleted;b.currentIndexes=c.currentIndexes;b.currentValues=c.currentValues;b.controller=function(){return c};b.onSelect=function(a){b.addEventListener(deepselect.events.select,
a.bind(b))};b.onSelectStart=function(a){b.addEventListener(deepselect.events.selectStart,a.bind(b))};b.onSelectComplete=function(a){b.addEventListener(deepselect.events.selectComplete,a.bind(b))};return b};
deepselect.Controller=function(e,k,a){function f(){p=[];h=[];for(var r=a.getValues(),b=-1,l=m.length;++b<l;){var c=e.getItemAt(m.slice(0,b+1));p.push(c);h.push(c?c.value:r[b])}}function g(r){var c=e.getItemAt(r);(c=a.addNode(c))&&b(c,r);return c}function b(c,b){var l=a.isEnableLabels()?1:0;c.addEventListener("change",function(a){d.handleSelectAt(b.concat(c.selectedIndex-l))})}function c(c){var a;q?(a=document.createEvent("Event"),a.initEvent(c,!0,!1)):a=new Event(c);a.selectedIndexes=m.concat();a.selectedItems=
p.concat();a.selectedValues=h.concat();k.dispatchEvent(a)}var d=this,q=-1<window.navigator.userAgent.indexOf("MSIE "),l=!1,n=!1,m=[],p=[],h=[],s=0;d.isCompleted=function(){return l};d.getRenderer=function(){return a};d.getDataProvider=function(){return e};d.currentIndexes=function(a){a&&d.selectByIndexes(a);f();return m.concat()};d.currentValues=function(a){a&&d.selectByValues(a);f();return h.concat()};d.selectByIndexes=function(c){d.handleSelectAt(c.slice(0,c.length-1));d.handleSelectAt(c.slice(0,
c.length));a.setSelectedIndexes(c)};d.selectByValues=function(a){d.selectByIndexes(e.getIndexesByVals(a))};d.handleSelectAt=function(b){b=b||[];var d=b[b.length-1];if(e.getItemsAt(b)||!(0<=d)){for(var d=-1,h=Math.min(b.length,m.length);++d<h&&b[d]==m[d];);for(var k=--d,h=m.length;++k<h;)m.pop(),a.popNode();k=null;for(h=b.length;++d<h;)m.push(b[d]),k=g(m.concat());0==h&&(m=[],a.popNode(),k=g(m.concat()));++s;k&&arguments.callee(b.concat(a.isEnableLabels()?-1:0));--s;0==s&&(l=!k,f(),c(deepselect.events.select),
n&&(n=!0,c(deepselect.events.selectStart)),l&&(n=!1,f(),c(deepselect.events.selectComplete)))}};d.handleSelectAt()};
deepselect.Renderer=function(e,k,a,f,g,b){var c=this,d=[],q=[];k=k||deepselect.cssClasses;f=f||"Choose...";b=b||"";c.isEnableLabels=function(){return a};c.getValues=function(){for(var a=[],c=-1,b=d.length;++c<b;){var e=d[c];e&&a.push(e.value)}return a};c.setSelectedIndexes=function(c){for(var b=a?1:0,e=-1,f=Math.min(c.length,d.length);++e<f;)d[e].selectedIndex=c[e]+b};c.popNode=function(){0<q.length&&(d.pop(),(child=q.pop())&&e.removeChild(child))};c.addNode=function(l){var n=null,m=(l?l.items:null)||
[],p=m.length;if(0<p){n=document.createElement("select");n.className=k.node;if(a){var h={};h.name=l.label||f;h.value=void 0!==l.labelValue?l.labelValue:b;h.selected=!0;h.disabled=!(void 0!==l.labelSelectable?l.labelSelectable:g);n.appendChild(c.renderNodeItem(h))}for(l=-1;++l<p;)n.appendChild(c.renderNodeItem(m[l]));h=c.renderNodeContainer(n);e.appendChild(h)}d.push(n);q.push(h);return n};c.renderNodeContainer=function(a){el=document.createElement("div");el.className=k.nodeContainer;el.appendChild(a);
return el};c.renderNodeItem=function(a){var c=document.createTextNode(a.name),b=document.createElement("option");b.className=k.nodeOption;b.appendChild(c);b.setAttribute("value",void 0!==a.value?a.value:"");a.disabled&&b.setAttribute("disabled","disabled");a.selected&&b.setAttribute("selected","selected");return b}};
deepselect.DataProvider=function(e){function k(a){for(var f=e,g=f.items,b=-1,c=a.length;++b<c;)if(f=a[b],0<=f&&f<g.length)f=g[f],g=f.items||[];else{g=f=null;break}return{item:f,items:g}}this.getItemAt=function(a){return k(a).item};this.getItemsAt=function(a){return k(a).items};this.getIndexesByVals=function(a){a=a.concat();for(var f=[],g=e.items;a.length;){for(var b=a.shift(),c=g.length;0<c--&&g[c].value!=b;);f.push(c);if(-1<c&&(g=g[c].items))continue;break}return f}};